/* Authentication Styles (inline prompt only; legacy modal removed) */
:root { --auth-width: 380px; }

.email-prompt {
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 12px 14px 18px;
  background: linear-gradient(135deg, var(--bg), color-mix(in srgb, var(--bg-2) 60%, transparent));
  min-height: 100%;
}

.email-prompt .prompt-content {
  width: 100%;
  max-width: 400px;
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 22px;
  padding: 28px 26px 30px;
  box-shadow: var(--shadow-md);
  display: flex;
  flex-direction: column;
  gap: 16px;
  position: relative;
  animation: tmScaleIn .35s cubic-bezier(.4,0,.2,1);
}

.email-prompt h1 {
  margin: 0;
  font-size: 26px;
  font-weight: 800;
  letter-spacing: -0.02em;
  background: linear-gradient(135deg, var(--accent), var(--accent-2));
  -webkit-background-clip: text; background-clip: text; color: transparent;
}

#authTagline { margin: -6px 0 4px; font-size: 14px; color: var(--muted); }

.email-prompt .auth-input {
  width: 100%;
  padding: 12px 14px;
  border: 1px solid var(--border);
  border-radius: 14px;
  background: linear-gradient(145deg, var(--bg), var(--bg-2));
  font: 500 14px var(--font);
  color: var(--text);
  transition: var(--transition);
  box-shadow: inset 0 2px 4px rgba(0 0 0 / 4%);
}
.email-prompt .auth-input:focus { outline: none; border-color: var(--accent); background: var(--card); box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent) 30%, transparent), inset 0 2px 4px rgba(0 0 0 / 6%); }

.email-prompt .btn.primary {
  width: 100%;
  display: inline-flex; align-items: center; justify-content: center;
  gap: 6px;
  font-weight: 600;
  position: relative;
}
.email-prompt .btn.primary .btn-icon { transition: transform .25s ease; }
.email-prompt .btn.primary:hover .btn-icon { transform: translateX(4px); }

.auth-toggle-container { text-align: center; margin-top: 4px; }
.auth-toggle-link { background: none; border: none; padding: 6px 10px; font: 500 13px var(--font); color: var(--accent); cursor: pointer; transition: var(--transition); }
.auth-toggle-link:hover { text-decoration: underline; color: var(--accent-2); }

.auth-error { margin: 0; font-size: 12px; color: #dc2626; font-weight: 500; min-height: 16px; }

body.theme-dark .email-prompt .auth-input,
body.theme-ocean .email-prompt .auth-input,
body.theme-cyberpunk .email-prompt .auth-input { background: linear-gradient(145deg, var(--bg-2), var(--bg)); }
body.theme-dark .email-prompt .auth-input:focus,
body.theme-ocean .email-prompt .auth-input:focus,
body.theme-cyberpunk .email-prompt .auth-input:focus { background: var(--card); }

@media (max-width: 420px) {
  .email-prompt .prompt-content { padding: 24px 20px 26px; border-radius: 18px; }
  .email-prompt h1 { font-size: 22px; }
}

/* Removed legacy .verification-* modal styles to reduce bundle size */

.verification-modal {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 24px 16px;
  background: linear-gradient(135deg, color-mix(in srgb, var(--bg) 70%, rgba(0,0,0,0.55)), color-mix(in srgb, var(--bg-2) 55%, rgba(0,0,0,0.65)));
  backdrop-filter: blur(4px) saturate(1.2);
  z-index: 9999;
  animation: tmFadeIn 0.25s ease-out;
}

.verification-content {
  width: 100%;
  max-width: var(--auth-width);
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 22px;
  padding: 28px 28px 26px;
  box-shadow: var(--shadow-md);
  display: flex;
  flex-direction: column;
  gap: 14px;
  position: relative;
  animation: tmScaleIn 0.35s cubic-bezier(.4,0,.2,1);
}

body.theme-dark .verification-content,
body.theme-ocean .verification-content,
body.theme-cyberpunk .verification-content,
body.theme-sunset .verification-content,
body.theme-forest .verification-content {
  box-shadow: 0 10px 36px -4px rgba(0 0 0 / 50%), 0 4px 12px rgba(0 0 0 / 35%);
}

.verification-title {
  margin: 0;
  font-size: 22px;
  font-weight: 800;
  letter-spacing: -0.02em;
  background: linear-gradient(135deg, var(--accent), var(--accent-2));
  background-clip: text; /* Standard property for lint */
  -webkit-background-clip: text;
  color: transparent;
}

.verification-text {
  margin: 0 0 4px;
  font-size: 14px;
  line-height: 1.4;
  color: var(--muted);
}

.verification-input {
  width: 100%;
  padding: 12px 14px;
  border: 1px solid var(--border);
  border-radius: 14px;
  background: linear-gradient(145deg, var(--bg), var(--bg-2));
  font: 500 14px var(--font);
  color: var(--text);
  transition: var(--transition);
  box-shadow: inset 0 2px 4px rgba(0 0 0 / 4%);
}

.verification-input:focus {
  outline: none;
  border-color: var(--accent);
  box-shadow: 0 0 0 3px color-mix(in srgb, var(--accent) 30%, transparent), inset 0 2px 4px rgba(0 0 0 / 6%);
  background: var(--card);
}

/* High-contrast focus outline for accessibility */
.verification-content :is(.verification-input, .btn, .tm-password-toggle):focus-visible {
  outline: 2px solid color-mix(in srgb, var(--accent) 65%, transparent);
  outline-offset: 2px;
}

.verification-input::placeholder { color: color-mix(in srgb, var(--muted) 70%, transparent); }

.verification-error {
  display: none;
  background: color-mix(in srgb, #ef4444 12%, transparent);
  border: 1px solid color-mix(in srgb, #ef4444 35%, transparent);
  color: #dc2626;
  padding: 10px 12px;
  border-radius: 12px;
  font-size: 12px;
  font-weight: 500;
  line-height: 1.4;
  animation: tmShake 0.4s ease;
}

.verification-error:empty { display: none !important; }

.verification-button-container {
  display: flex;
  gap: 10px;
  margin-top: 4px;
}

.verification-button-container .btn.primary {
  flex: 1;
  font-weight: 600;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 8px;
  position: relative;
}

.verification-button-container .btn.primary.loading {
  pointer-events: none;
  opacity: 0.9;
}

.tm-spinner {
  width: 16px;
  height: 16px;
  border-radius: 50%;
  border: 3px solid color-mix(in srgb, var(--accent) 30%, transparent);
  border-top-color: var(--accent);
  animation: tmSpin 0.9s linear infinite;
}

.verification-resend {
  border: none;
  background: none;
  padding: 4px 6px;
  font: 500 12px var(--font);
  color: var(--accent);
  cursor: pointer;
  align-self: flex-start;
  margin-top: 2px;
  transition: var(--transition);
}

.verification-resend:hover { text-decoration: underline; color: var(--accent-2); }

/* Subtle hover + active states for primary button */
.verification-button-container .btn.primary:not(.loading):hover {
  filter: brightness(1.05);
}
.verification-button-container .btn.primary.loading .btn-label { opacity: .85; }

/* Reduced motion: remove scale animation only, keep fade for context */
@media (prefers-reduced-motion: reduce) {
  .verification-content { animation: tmFadeIn .2s ease-out; }
}

/* Signup mode adjustments (JS could add .mode-signup to modal root; harmless otherwise) */
.verification-modal.mode-signup .verification-title::after {
  content: ' â€“ Create Account';
  font-weight: 600;
  font-size: 12px;
  letter-spacing: normal;
  background: none;
  -webkit-background-clip: initial;
  background-clip: initial;
  color: var(--muted);
  margin-inline-start: 4px;
}

/* Dark / high-contrast fine-tuning */
body.theme-dark .verification-input,
body.theme-ocean .verification-input,
body.theme-cyberpunk .verification-input {
  background: linear-gradient(145deg, var(--bg-2), var(--bg));
}
body.theme-dark .verification-input:focus,
body.theme-ocean .verification-input:focus,
body.theme-cyberpunk .verification-input:focus { background: var(--card); }

/* Password toggle active visual */
.tm-password-toggle.active {
  background: linear-gradient(135deg, var(--accent), var(--accent-2));
  color: #fff;
  border-color: var(--accent);
  box-shadow: 0 0 0 2px color-mix(in srgb, var(--accent) 40%, transparent);
}

/* Utility: shrink gap for stacked fields on very small widths */
@media (max-width: 380px) {
  .verification-content { gap: 10px; padding: 22px 20px 20px; }
  .verification-title { font-size: 20px; }
}

/* Password wrapper & toggle */
.tm-password-wrapper { position: relative; }
.tm-password-wrapper .verification-input { padding-right: 42px; }
.tm-password-toggle {
  position: absolute;
  inset-block-start: 50%;
  inset-inline-end: 10px;
  translate: 0 -50%;
  background: var(--bg-2);
  border: 1px solid var(--border);
  border-radius: 8px;
  width: 32px; height: 32px;
  display: inline-flex; align-items: center; justify-content: center;
  cursor: pointer;
  color: var(--muted);
  transition: var(--transition);
}
.tm-password-toggle:hover { background: var(--accent); color: #fff; border-color: var(--accent); }
.tm-password-toggle svg { width: 16px; height: 16px; stroke: currentColor; }

/* Close button (optional future) */
.verification-close {
  position: absolute;
  inset-block-start: 10px;
  inset-inline-end: 10px;
  background: var(--bg-2);
  border: 1px solid var(--border);
  width: 34px; height: 34px;
  border-radius: 10px;
  color: var(--muted);
  display: inline-flex; align-items: center; justify-content: center;
  cursor: pointer;
  transition: var(--transition);
}
.verification-close:hover { background: var(--accent); border-color: var(--accent); color: #fff; }

/* Animations */
@keyframes tmFadeIn { from { opacity: 0; } to { opacity: 1; } }
@keyframes tmScaleIn { from { opacity: 0; transform: translateY(12px) scale(.96); } to { opacity: 1; transform: translateY(0) scale(1); } }
@keyframes tmSpin { to { transform: rotate(360deg); } }
@keyframes tmShake {
  10%, 90% { transform: translateX(-1px); }
  20%, 80% { transform: translateX(2px); }
  30%, 50%, 70% { transform: translateX(-4px); }
  40%, 60% { transform: translateX(4px); }
}

/* Reduce motion preference */
@media (prefers-reduced-motion: reduce) {
  .verification-modal, .verification-content, .verification-error { animation: none; }
  .tm-spinner { animation: tmSpin 1.4s linear infinite; }
}

/* Compact adjustments for very small popup width */
@container (max-width: 360px) {
  .verification-content { padding: 20px 18px; border-radius: 18px; }
  .verification-title { font-size: 20px; }
}
